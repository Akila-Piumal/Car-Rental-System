<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Driver Manage</title>
    <link rel="icon" href="favIcon.png">
    <meta name="keywords" content="Car Rental,Rent,Cars">
    <meta name="description" content="Hi there! We are Easy Car Rentals. If you want a rent car please visit us..">
    <meta name="author" content="Akila Piumal">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/normalize.css">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
</head>
<body>

<nav class="navbar navbar-expand-lg bg-body-tertiary" id="navBarNew">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">
            <img src="assets/img/rent.png" alt="Logo" width="50" height="40" class="d-inline-block align-text-top">
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav " id="navListInAdmin">
                <li class="nav-item ">
                    <a class="nav-link border-end px-3" href="adminDashBoard.html">Dashboard</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link border-end px-3" href="adminCarManage.html" >Cars</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active fw-bold border-end px-3" aria-current="page" href="#" style="color: #ef6d48">Drivers</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link border-end px-3" href="adminRentRequests.html">Rent Request</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link border-end px-3" href="#">Bookings</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link px-3" href="#">Return</a>
                </li>

            </ul>
        </div>
        <div>
            <img src="assets/img/21-avatar-lineal.gif" alt="Logo" width="40" height="40"
                 class="d-inline-block align-text-top">
        </div>
        <small class="text-white text-muted" id="userName"></small>

    </div>
</nav>

<section id="mainOfAdminDrivers">
    <section id="buttonSec" class="row container-fluid">
        <div class="col-3 d-flex justify-content-start mt-3 mx-3">
            <button type="button" class="btn fw-bold text-white" id="btnAddDriver" data-bs-toggle="modal" data-bs-target="#addCarModel">Add Driver</button>
        </div>
    </section>

    <div class="modal fade" id="addCarModel" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
         aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content" >
                <div class="modal-header position-relative">
                    <h1 class="modal-title fs-3 position-absolute fw-bolder" id="addCarModelLabel">Add Car</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" style="height: 550px ; width: 486px">
                    <form class="row g-3 ">

                        <div class="col-md-4">
                            <label class="form-label form-control-sm mb-0 fw-bold"
                                   for="regNo">Reg No.</label>
                            <input class="form-control form-control-sm " id="regNo" type="text">
                        </div>

                        <div class="col-md-4">
                            <label class="form-label form-control-sm mb-0 fw-bold"
                                   for="brand">Brand</label>
                            <input class="form-control form-control-sm" id="brand" type="text">
                        </div>

                        <div class="col-4">
                            <label class="form-label form-control-sm mb-0 fw-bold"
                                   for="type">Type</label>
                            <input class="form-control form-control-sm" id="type" type="text">
                        </div>

                        <div class="col-5">
                            <label class="form-label form-control-sm mb-0 fw-bold"
                                   for="name">Name</label>
                            <input class="form-control form-control-sm" id="name"
                                   type="text">
                        </div>

                        <div class="col-md-2">
                            <label class="form-label form-control-sm mb-0 fw-bold" for="color">Color</label>
                            <input class="form-control form-control-sm" id="color" type="color">
                        </div>

                        <div class="col-5">
                            <label class="form-label form-control-sm mb-0 fw-bold"
                                   for="passengers">No. Of Passengers</label>
                            <input class="form-control form-control-sm" id="passengers" type="text">
                        </div>

                        <div class="col-md-6 d-flex flex-column">
                            <label class="form-label form-control-sm mb-0 fw-bold" for="fuelType">Fuel Type</label>
                            <select name="fuelTypeSelect" id="fuelType" class="form-select form-select-sm">
                                <option selected></option>
                                <option>Petrol</option>
                                <option>Diesel</option>
                            </select>
                        </div>

                        <div class="col-md-6 d-flex flex-column">
                            <label class="form-label form-control-sm mb-0 fw-bold" for="transmissionType">Transmission Type</label>
                            <select name="transmissionTypeSelect" id="transmissionType" class="form-select form-select-sm">
                                <option selected></option>
                                <option>Auto</option>
                                <option>Manual</option>
                            </select>
                        </div>

                        <div class="col-6">
                            <label class="form-label form-control-sm mb-0 fw-bold" for="dailyRate">Daily Rate</label>
                            <input class="form-control form-control-sm" id="dailyRate" type="text">
                        </div>

                        <div class="col-6">
                            <label class="form-label form-control-sm mb-0 fw-bold"
                                   for="monthlyRate">Monthly Rate</label>
                            <input class="form-control form-control-sm" id="monthlyRate" type="text">
                        </div>

                        <div class="col-6">
                            <label class="form-label form-control-sm mb-0 fw-bold"
                                   for="freeMileage">Free Mileage</label>
                            <input class="form-control form-control-sm" id="freeMileage" type="text">
                        </div>

                        <div class="col-6">
                            <label class="form-label form-control-sm mb-0 fw-bold"
                                   for="extraKM">Price For Extra KM</label>
                            <input class="form-control form-control-sm" id="extraKM" type="text">
                        </div>

                        <div class="col-6">
                            <label class="form-label form-control-sm mb-0 fw-bold" for="frontImgInput">Front Image</label>
                            <input id="frontImgInput" name="frontImg" type="file" class=" form-control form-control-sm">
                        </div>

                        <div class="col-6">
                            <label class="form-label form-control-sm mb-0 fw-bold" for="backImgInput">Back Image</label>
                            <input id="backImgInput" name="backImg" type="file" class=" form-control form-control-sm">
                        </div>

                        <div class="col-6">
                            <label class="form-label form-control-sm mb-0 fw-bold" for="leftImgInput">Left Side Image</label>
                            <input id="leftImgInput" name="leftImg" type="file" class=" form-control form-control-sm">
                        </div>

                        <div class="col-6">
                            <label class="form-label form-control-sm mb-0 fw-bold" for="rightImgInput">Right Side Image</label>
                            <input id="rightImgInput" name="rightImg" type="file" class=" form-control form-control-sm">
                        </div>


                    </form>
                </div>
                <div class="modal-footer d-flex justify-content-center">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="btnAddCarInModel">Add</button>
                </div>
            </div>
        </div>
    </div>

    <section id="driversTableSec" class="mt-3">
        <table id="tblDriverDetails">
            <thead>
            <tr>
                <th>Licence No</th>
                <th>Name</th>
                <th>Address</th>
                <th>Contact No.</th>
                <th>Status</th>
            </tr>
            </thead>

            <tbody id="tblDriverDetailsBody">

            </tbody>
        </table>
    </section>
</section>

<script src="assets/js/jquery-3.6.1.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>
<script src="https://kit.fontawesome.com/e16bf5be25.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
    let baseUrl = "http://localhost:8080/Back_End_war_exploded/";

    window.onload = function () {
        var loggedUser = sessionStorage.getItem("user");
        let userObject = JSON.parse(loggedUser);
        $('#userName').text(userObject.name);
    };

    getAllDrivers();

    function getAllDrivers() {
        $("#tblDriverDetailsBody").empty();
        $.ajax({
            url: baseUrl+"driver",
            success: function (res) {
                for (let c of res.data) {
                    let licenceNo = c.licenceNo;
                    let address = c.address;
                    let contactNo = c.contactNo;
                    let name = c.name;
                    let status = c.status;

                    let row = "<tr><td>" + licenceNo + "</td><td>" + name + "</td><td>" + address + "</td><td>" + contactNo + "</td><td>" + status + "</td></tr>";
                    $("#tblDriverDetailsBody").append(row);
                }
            },
            error: function (error) {
                let message = JSON.parse(error.responseText).message;
                alert(message);
            }
        });
    }

</script>

</body>
</html>